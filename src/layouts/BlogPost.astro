---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";

export interface Props {
  content: {
    title: string;
    description: string;
    pubDate: string;
    slug: string;
    tags?: string[];
    heroImageUrl?: string;
    heroImageAlt?: string;
  };
}

const {
  content: { title, description, pubDate, slug, tags = [], heroImageUrl, heroImageAlt },
} = Astro.props as Props;

// Use heroImageUrl directly
const heroImageSrc = heroImageUrl;
const heroImageAltText = heroImageAlt || title;

const formattedDate = new Date(pubDate).toLocaleDateString('en-US', {
  year: 'numeric',
  month: 'long',
  day: 'numeric'
});
---

<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <BaseHead title={title} description={description} imageUrl={heroImageSrc} canonicalRoute={`posts/${slug}`}/>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body>
    <Header />

    <article class="wrapper py-16 md:py-24">
      <!-- Header -->
      <header class="text-center max-w-3xl mx-auto mb-16 md:mb-24">
        {tags.length > 0 && (
          <div class="flex flex-wrap gap-3 justify-center mb-6">
            {tags.map(tag => (
              <span class="text-xs font-sans font-bold tracking-widest uppercase text-accent">
                {tag}
              </span>
            ))}
          </div>
        )}
        
        <h1 class="text-5xl md:text-6xl font-bold font-heading text-ink mb-6 leading-[1.1]">
          {title}
        </h1>
        
        <div class="flex items-center justify-center gap-3 text-ink-light font-sans text-sm uppercase tracking-widest">
          <time>{formattedDate}</time>
        </div>

        {heroImageSrc && (
          <div class="mt-12 relative shadow-editorial rounded-sm overflow-hidden">
            <img
              src={heroImageSrc}
              alt={heroImageAltText}
              class="w-full object-cover"
              loading="lazy"
              decoding="async"
            />
          </div>
        )}
      </header>

      <!-- Content -->
      <main class="prose mx-auto">
        <slot />
      </main>

      <!-- Back to Blog -->
      <footer class="max-w-3xl mx-auto mt-24 pt-12 border-t border-ink/5">
        <a
          href="/"
          class="inline-flex items-center gap-3 text-ink font-sans font-bold uppercase tracking-widest text-xs hover:text-accent transition-colors group"
        >
          <svg class="w-4 h-4 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
          </svg>
          Back to Journal
        </a>
      </footer>
    </article>

    <Footer />
  </body>
</html>

<style is:global>
  @import "../styles/global.css";
  @import "../styles/blog.css";
</style>
